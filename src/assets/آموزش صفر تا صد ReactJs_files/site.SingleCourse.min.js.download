/*!
 * clipboard.js v1.7.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
function AddToFavorite(n){$.get("/Account/AddToFavorite/"+n,function(){$(".wrapper").slideUp("slow").remove();swal("عملیات موفقیت آمیز بود","دوره با موفقیت به علاقه مندی های شما افزوده شد","success");$("#AddToFavoriteWrapper").fadeOut()})}function VoteCourse(n){$("#corseVote").slideUp("slow");$.get("/Course/CourseVote/"+CourseId+"?vote="+n,function(n){$("#corseVote").html(n).slideDown()})}function LoadVoteCourse(n){$("#corseVote").load("/Course/CourseVote/"+n)}function saveDescDisLike(n){$("#votes").val()||$.ajax({url:"/Course/AddDescToVote/"+n,type:"GET",data:{Desc:$("#txtdescvote").val()}}).done(function(){$("#votes").hide().remove()})}function HeartBtnClicked(){$("#favorite-heart").hasClass("zmdi-favorite-outline")?($("#favorite-heart").removeClass("zmdi-favorite-outline"),$("#favorite-heart").addClass("zmdi-favorite"),$("#favorite-heart").addClass("clicked-heart-style")):($("#favorite-heart").removeClass("zmdi-favorite"),$("#favorite-heart").removeClass("clicked-heart-style"),$("#favorite-heart").addClass("zmdi-favorite-outline"))}function setCourseId(){if(CourseId===undefined||CourseId===null){var n=document.body.getElementsByTagName("script"),t=n[n.length-1],i=t,r=i.getAttribute("class");CourseId=r;(CourseId===undefined||CourseId===null)&&(CourseId=$("#CourseId").val())}}function loadComments(){currentCommentPageId+=1;fetch("/courses/"+CourseId+"/Comments?pageId="+currentCommentPageId).then(function(n){return n.text()}).then(function(n){var u=new DOMParser,f=u.parseFromString(n,"text/html"),t,i,r;$("#CommentList").append(n);t=f.getElementsByName("CommentPageState");t.length!==0?(i=t[0].attributes.getNamedItem("pageCount").value,r=t[0].attributes.getNamedItem("currentPage").value,i===r?$("#view-comment-more-button").remove():$("#view-comment-more-button").show()):$("#view-comment-more-button").remove()})}function onclickViewOnline(){$(".video-items-layer .video-item .video-Live-layer").css("display","none");$(".video-items-layer .video-item .video-Live-layer").empty();$(this).parents().closest(".video-item").find(".video-Live-layer").fadeIn("fast");var n=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("id"),t=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("episodeId");LoadVideoForShowLive(t,n)}function touchHandler(){$(".video-items-layer .video-item .video-Live-layer").css("display","none");$(".video-items-layer .video-item .video-Live-layer").empty();$(this).parents().closest(".video-item").find(".video-Live-layer").fadeIn("fast");var n=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("id"),t=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("episodeId");LoadVideoForShowLive(t,n)}function LoadVideoForShowLive(n,t){$(".video-js").length>0&&$.each($(".video-js"),function(n,t){t.player.pause()});$(".plyr-js").length>0&&$.each($(".plyr-js"),function(n,t){t.pause()});$.each(Players,function(n,t){t.pause()});var i=t;LoadingShow("#"+i);$.ajax({url:"/courses/GetLiveVideoToShow?episodeId="+n,type:"Get",contentType:!1,processData:!1,success:function(n){$("#"+i).html(n);initVideoPlayer();LoadingHide("#"+i)},error:function(n){LoadingHide("#"+i);n.status===500&&setTimeout(function(n){SubmitForms(n)}(form),1e3)}})}function GetPreConstructedText(n,t){$("#"+n).val($("#"+t).val())}function SetCommentPrivate(n){swal({title:"اخطار",text:"آیا از این عملیات اطمینان دارید؟",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"بله",cancelButtonText:"خیر",closeOnConfirm:!1,closeOnCancel:!1,dangerMode:!0}).then(t=>{t.value&&($("#CourseCommentChange_CommentId").val(n),$("#CourseCommentChange_IsSetPrivate").val(!0),$("#CourseCommentChange_IsSetDelete").val(!1),$("#CourseCommentChangeState").modal())})}function DeleteComment(n){swal({title:"اخطار",text:"آیا از این عملیات اطمینان دارید؟",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"بله",cancelButtonText:"خیر",closeOnConfirm:!1,closeOnCancel:!1,dangerMode:!0}).then(t=>{t.value&&($("#CourseCommentChange_CommentId").val(n),$("#CourseCommentChange_IsSetPrivate").val(!1),$("#CourseCommentChange_IsSetDelete").val(!0),$("#CourseCommentChangeState").modal())})}function OnSuccessChangeCommentState(n){n.status==="Done"?($("#Comment_"+n.data.id).remove(),location.reload(),$("#CourseCommentChangeState").modal("toggle")):ShowAlertForResult("warning",n.message,"هشدار")}function SetComments(n){CourseId=n}function GetComments(){$.get("/courses/"+CourseId+"/Comments",null,function(n){$("#CommentList").html(n);var t=window.$("pre");t.length>0&&window.$.getScript("/Site/ckeditor/plugins/codesnippet/lib/highlight/highlight.pack.js",function(){window.$("<link/>",{rel:"stylesheet",type:"text/css",href:"/Site/ckeditor/plugins/codesnippet/lib/highlight/styles/atelier-dune.light.css"}).appendTo("head");hljs.initHighlightingOnLoad()})})}function ReplyComment(n){$("#replyIdInput").val(n);$("#commentTitle").html("پاسخ خودرا وارد کنید!");$("#commentText").focus();$("html,body").animate({scrollTop:$("#TextEditorPlace").offset().top},"slow");timer=setInterval(change,1e3)}function ReportComment(n){$("#ReportModal").modal();$("#CommentIdInput").val(n)}function change(){var n=document.getElementById("TextEditorPlace");n.style.backgroundColor=["orange",""][i];i===1&&clearInterval(timer);i=1}function scrollForEpisode(){if(window.location.href.indexOf("?episodeId=")>0){var n=$("#ActiveEpisodeId").val();$("html,body").animate({scrollTop:$("#Ep_"+n).offset().top},"slow")}}function initVideoPlayer(){var i,n,t;setCourseId();IsEpisodeView=window.location.href.indexOf("?episodeId=")>0;i=document.getElementsByClassName("video-js")[0];n=$(".video-js");n.length>0&&n.each(function(n,t){var r=$(t).attr("id"),i=!1;if($.each(Players,function(n,t){t.id_==r&&(i=!0)}),!i){if(player=videojs(t,{aspectRatio:"16:9",notSupportedMessage:"پشتیبانی از این فرمت انجام نمیشود!",suppressNotSupportedError:!0}),IsEpisodeView){player.on("ended",VideoEnded);player.on("play",VideoPlay);player.on("firstplay",VideoFirstPlay);player.on("pause",VideoPause);GetFileName();GetEpisodeId();SetTimeFromServer()}Players.push(player)}});t=$(".plyr-js");t.length>0&&t.each(function(n,t){var r=$(t).attr("id"),i=!1;if($.each(Players,function(n,t){t.id==r&&(i=!0)}),!i){if(player=new Plyr(t,{quality:"{ default: 576, options: [4320, 2880, 2160, 1440, 1080, 720, 576, 480, 360, 240] }",ratio:"16:9"}),IsEpisodeView){player.on("ended",VideoEnded);player.on("play",VideoPlay);player.on("pause",VideoPause);GetFileName();GetEpisodeId();SetTimeFromServer()}Players.push(player)}});console.log(Players)}function IntervalRun(){}function IntervalStop(){}function VideoSeeking(){console.log("Seeking")}function VideoPlay(n){console.log(n);IntervalRun();SendCurrentTimeToServer()}function VideoFirstPlay(){IntervalRun()}function VideoPause(){IntervalStop();SendCurrentTimeToServer()}function VideoEnded(){IntervalStop();SendCurrentTimeToServer()}function ChangeVideo(n,t){SendCurrentTimeToServer();setVideoSource("/courses/LiveFreeVideo/"+n+"/"+t);GetFileName();GetEpisodeId();SetTimeFromServer()}function SendCurrentTimeToServer(){var n=player.duration(),t=getVideoPosition();n>0}function SetTimeFromServer(){}function GetEpisodeId(){var t=window.location.href,n=t.split("?episodeId=");EpisodeId=n[n.length-1];console.log(EpisodeId)}function GetFileName(){var t=getSourceFile(),n=t.split("/");FileName=n[n.length-1];console.log(FileName)}function getSourceFile(){return player.currentSrc()}function setVideoSource(n){player.src({type:"video/mp4",src:n})}function getVideoPosition(){return player.currentTime()}function setVideoPosition(n){return player.currentTime(n)}function expandable(){let t=$(".js-collapse-btn"),n=$(".js-collapse-container");t.click(function(){n.hasClass("collapsed")?n.removeClass("collapsed"):n.addClass("collapsed")})}var player,EpisodeId,FileName,IsEpisodeView,SendDataToServerLoop,CourseId,Players,currentCommentPageId,timer,i;!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.Clipboard=n()}}(function(){var n;return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){function r(n,t){for(;n&&n.nodeType!==u;){if("function"==typeof n.matches&&n.matches(t))return n;n=n.parentNode}}var u=9,i;"undefined"==typeof Element||Element.prototype.matches||(i=Element.prototype,i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector);t.exports=r},{}],2:[function(n,t){function i(n,t,i,u,f){var e=r.apply(this,arguments);return n.addEventListener(i,e,f),{destroy:function(){n.removeEventListener(i,e,f)}}}function r(n,t,i,r){return function(i){i.delegateTarget=u(i.target,t);i.delegateTarget&&r.call(n,i)}}var u=n("./closest");t.exports=i},{"./closest":1}],3:[function(n,t,i){i.node=function(n){return void 0!==n&&n instanceof HTMLElement&&1===n.nodeType};i.nodeList=function(n){var t=Object.prototype.toString.call(n);return void 0!==n&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in n&&(0===n.length||i.node(n[0]))};i.string=function(n){return"string"==typeof n||n instanceof String};i.fn=function(n){return"[object Function]"===Object.prototype.toString.call(n)}},{}],4:[function(n,t){function r(n,t,r){if(!n&&!t&&!r)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(r))throw new TypeError("Third argument must be a Function");if(i.node(n))return u(n,t,r);if(i.nodeList(n))return f(n,t,r);if(i.string(n))return e(n,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}function u(n,t,i){return n.addEventListener(t,i),{destroy:function(){n.removeEventListener(t,i)}}}function f(n,t,i){return Array.prototype.forEach.call(n,function(n){n.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(n,function(n){n.removeEventListener(t,i)})}}}function e(n,t,i){return o(document.body,n,t,i)}var i=n("./is"),o=n("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(n,t){function i(n){var t,r,i,u;return"SELECT"===n.nodeName?(n.focus(),t=n.value):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName?(r=n.hasAttribute("readonly"),r||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),r||n.removeAttribute("readonly"),t=n.value):(n.hasAttribute("contenteditable")&&n.focus(),i=window.getSelection(),u=document.createRange(),u.selectNodeContents(n),i.removeAllRanges(),i.addRange(u),t=i.toString()),t}t.exports=i},{}],6:[function(n,t){function i(){}i.prototype={on:function(n,t,i){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:i}),this},once:function(n,t,i){function r(){u.off(n,r);t.apply(i,arguments)}var u=this;return r._=t,this.on(n,r,i)},emit:function(n){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[n]||[]).slice(),t=0,u=i.length;for(t;t<u;t++)i[t].fn.apply(i[t].ctx,r);return this},off:function(n,t){var u=this.e||(this.e={}),r=u[n],f=[],i,e;if(r&&t)for(i=0,e=r.length;i<e;i++)r[i].fn!==t&&r[i].fn._!==t&&f.push(r[i]);return f.length?u[n]=f:delete u[n],this}};t.exports=i},{}],7:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","select"],f);else if(void 0!==r)f(i,t("select"));else{var e={exports:{}};f(e,u.select);u.clipboardAction=e.exports}}(this,function(n,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=r(t),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(t){u(this,n);this.resolveOptions(t);this.initSelection()}return e(n,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=n.action;this.container=n.container;this.emitter=n.emitter;this.target=n.target;this.text=n.text;this.trigger=n.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,r="rtl"==document.documentElement.getAttribute("dir"),n;this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[r?"right":"left"]="-9999px";n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=i.default(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i.default(this.target);this.copyText()}},{key:"copyText",value:function(){var n=void 0;try{n=document.execCommand(this.action)}catch(t){n=!1}this.handleResult(n)}},{key:"handleResult",value:function(n){this.emitter.emit(n?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=n,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(n){if(void 0!==n){if(!n||"object"!==(void 0===n?"undefined":f(n))||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=n}},get:function(){return this._target}}]),n}();n.exports=o})},{select:5}],8:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if(void 0!==r)f(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var e={exports:{}};f(e,u.clipboardAction,u.tinyEmitter,u.goodListener);u.clipboard=e.exports}}(this,function(n,t,i,r){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n,t){var i="data-clipboard-"+n;if(t.hasAttribute(i))return t.getAttribute(i)}var h=u(t),c=u(i),l=u(r),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),y=function(n){function t(n,i){e(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(i),r.listenClick(n),r}return s(t,n),v(t,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof n.action?n.action:this.defaultAction;this.target="function"==typeof n.target?n.target:this.defaultTarget;this.text="function"==typeof n.text?n.text:this.defaultText;this.container="object"===a(n.container)?n.container:document.body}},{key:"listenClick",value:function(n){var t=this;this.listener=l.default(n,"click",function(n){return t.onClick(n)})}},{key:"onClick",value:function(n){var t=n.delegateTarget||n.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(n){return f("action",n)}},{key:"defaultTarget",value:function(n){var t=f("target",n);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(n){return f("text",n)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],i="string"==typeof n?[n]:n,t=!!document.queryCommandSupported;return i.forEach(function(n){t=t&&!!document.queryCommandSupported(n)}),t}}]),t}(c.default);n.exports=y})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});$(function(){new Clipboard(".copy-btn");$(".copy-btn").click(function(){var n=$(this);$(this).addClass("copied");setTimeout(function(){$(n).removeClass("copied")},1e3)});$(".video-items-layer .video-item > .view-description").bind("touchstart",function(){$(".video-items-layer .video-item .video-description-layer").css("display","none");$(this).parents().closest(".video-item").find(".video-description-layer").fadeIn("fast")});$("html,body").on("click",function(n){$(n.target).parents().hasClass("view-description")||$(".video-items-layer .video-item .video-description-layer").fadeOut("fast")});$(document).on("touchstart",".video-items-layer .video-item > .view-description",function(){$(".video-items-layer .video-item .video-description-layer").css("display","none");$(this).parents().closest(".video-item").find(".video-description-layer").fadeIn("fast")})});$(".btnScrollToComments").click(function(){$("html, body").animate({scrollTop:$(".comments-layer").offset().top},2e3)});$(function(){$.ajax({url:"/Course/GetCoursesAcademy",type:"Get"}).done(function(n){$("#rightSideCourse").append(n)})});
/*!
 * Infinite Scroll PACKAGED v3.0.6
 * Automatically add next page
 *
 * Licensed GPLv3 for open source use
 * or Infinite Scroll Commercial License for commercial use
 *
 * https://infinite-scroll.com
 * Copyright 2018 Metafizzy
 */
!function(n,t){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("jquery")):n.jQueryBridget=t(n,n.jQuery)}(window,function(n,t){"use strict";function i(i,u,o){function s(n,t,r){var u,e="$()."+i+'("'+t+'")';return n.each(function(n,s){var h=o.data(s,i),c,l;if(!h)return void f(i+" not initialized. Cannot call methods, i.e. "+e);if(c=h[t],!c||"_"==t.charAt(0))return void f(e+" is not a valid method");l=c.apply(h,r);u=void 0===u?l:u}),void 0!==u?u:n}function h(n,t){n.each(function(n,r){var f=o.data(r,i);f?(f.option(t),f._init()):(f=new u(r,t),o.data(r,i,f))})}o=o||t||n.jQuery;o&&(u.prototype.option||(u.prototype.option=function(n){o.isPlainObject(n)&&(this.options=o.extend(!0,this.options,n))}),o.fn[i]=function(n){if("string"==typeof n){var t=e.call(arguments,1);return s(this,n,t)}return h(this,n),this},r(o))}function r(n){!n||n&&n.bridget||(n.bridget=i)}var e=Array.prototype.slice,u=n.console,f="undefined"==typeof u?function(){}:function(n){u.error(n)};return r(t||n.jQuery),i}),function(n,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():n.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function t(){}var n=t.prototype;return n.on=function(n,t){if(n&&t){var i=this._events=this._events||{},r=i[n]=i[n]||[];return r.indexOf(t)==-1&&r.push(t),this}},n.once=function(n,t){if(n&&t){this.on(n,t);var i=this._onceEvents=this._onceEvents||{},r=i[n]=i[n]||{};return r[t]=!0,this}},n.off=function(n,t){var i=this._events&&this._events[n],r;if(i&&i.length)return r=i.indexOf(t),r!=-1&&i.splice(r,1),this},n.emitEvent=function(n,t){var i=this._events&&this._events[n],u,f,r,e;if(i&&i.length){for(i=i.slice(0),t=t||[],u=this._onceEvents&&this._onceEvents[n],f=0;f<i.length;f++)r=i[f],e=u&&u[r],e&&(this.off(n,r),delete u[r]),r.apply(this,t);return this}},n.allOff=function(){delete this._events;delete this._onceEvents},t}),function(n,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():n.matchesSelector=t()}(window,function(){"use strict";var n=function(){var t=window.Element.prototype,i,n,u,r;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(i=["webkit","moz","ms","o"],n=0;n<i.length;n++)if(u=i[n],r=u+"MatchesSelector",t[r])return r}();return function(t,i){return t[n](i)}}),function(n,t){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("desandro-matches-selector")):n.fizzyUIUtils=t(n,n.matchesSelector)}(window,function(n,t){var i={},u,r;return i.extend=function(n,t){for(var i in t)n[i]=t[i];return n},i.modulo=function(n,t){return(n%t+t)%t},u=Array.prototype.slice,i.makeArray=function(n){if(Array.isArray(n))return n;if(null===n||void 0===n)return[];var t="object"==typeof n&&"number"==typeof n.length;return t?u.call(n):[n]},i.removeFrom=function(n,t){var i=n.indexOf(t);i!=-1&&n.splice(i,1)},i.getParent=function(n,i){for(;n.parentNode&&n!=document.body;)if(n=n.parentNode,t(n,i))return n},i.getQueryElement=function(n){return"string"==typeof n?document.querySelector(n):n},i.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},i.filterFindElements=function(n,r){n=i.makeArray(n);var u=[];return n.forEach(function(n){if(n instanceof HTMLElement){if(!r)return void u.push(n);t(n,r)&&u.push(n);for(var f=n.querySelectorAll(r),i=0;i<f.length;i++)u.push(f[i])}}),u},i.debounceMethod=function(n,t,i){i=i||100;var u=n.prototype[t],r=t+"Timeout";n.prototype[t]=function(){var f=this[r],t,n;clearTimeout(f);t=arguments;n=this;this[r]=setTimeout(function(){u.apply(n,t);delete n[r]},i)}},i.docReady=function(n){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(n):document.addEventListener("DOMContentLoaded",n)},i.toDashed=function(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()},r=n.console,i.htmlInit=function(t,u){i.docReady(function(){var e=i.toDashed(u),f="data-"+e,s=document.querySelectorAll("["+f+"]"),h=document.querySelectorAll(".js-"+e),c=i.makeArray(s).concat(i.makeArray(h)),l=f+"-options",o=n.jQuery;c.forEach(function(n){var i,e=n.getAttribute(f)||n.getAttribute(l),s;try{i=e&&JSON.parse(e)}catch(h){return void(r&&r.error("Error parsing "+f+" on "+n.className+": "+h))}s=new t(n,i);o&&o.data(n,u,s)})})},i}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("ev-emitter"),require("fizzy-ui-utils")):n.InfiniteScroll=t(n,n.EvEmitter,n.fizzyUIUtils)}(window,function(n,t,i){function r(n,t){var u=i.getQueryElement(n),o;if(!u)return void console.error("Bad element for InfiniteScroll: "+(u||n));if(n=u,n.infiniteScrollGUID)return o=e[n.infiniteScrollGUID],o.option(t),o;this.element=n;this.options=i.extend({},r.defaults);this.option(t);f&&(this.$element=f(this.element));this.create()}var f=n.jQuery,e={},u,s,h,o;return r.defaults={},r.create={},r.destroy={},u=r.prototype,i.extend(u,t.prototype),s=0,u.create=function(){var n=this.guid=++s,t,i;if(this.element.infiniteScrollGUID=n,e[n]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath(),t=this.getPath&&this.getPath(),!t)return void console.error("Disabling InfiniteScroll");this.updateGetAbsolutePath();this.log("initialized",[this.element.className]);this.callOnInit();for(i in r.create)r.create[i].call(this)},u.option=function(n){i.extend(this.options,n)},u.callOnInit=function(){var n=this.options.onInit;n&&n.call(this,this)},u.dispatchEvent=function(n,t,i){var e,r,u;this.log(n,i);e=t?[t].concat(i):i;(this.emitEvent(n,e),f&&this.$element)&&(n+=".infiniteScroll",r=n,t&&(u=f.Event(t),u.type=n,r=u),this.$element.trigger(r,i))},h={initialized:function(n){return"on "+n},request:function(n){return"URL: "+n},load:function(n,t){return(n.title||"")+". URL: "+t},error:function(n,t){return n+". URL: "+t},append:function(n,t,i){return i.length+" items. URL: "+t},last:function(n,t){return"URL: "+t},history:function(n,t){return"URL: "+t},pageIndex:function(n,t){return"current page determined to be: "+n+" from "+t}},u.log=function(n,t){if(this.options.debug){var i="[InfiniteScroll] "+n,r=h[n];r&&(i+=". "+r.apply(this,t));console.log(i)}},u.updateMeasurements=function(){this.windowHeight=n.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+n.pageYOffset},u.updateScroller=function(){var t=this.options.elementScroll;if(!t)return void(this.scroller=n);if(this.scroller=t===!0?this.element:i.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t;},u.updateGetPath=function(){var n=this.options.path,t,i;return n?(t=typeof n,"function"==t)?void(this.getPath=n):(i="string"==t&&n.match("{{#}}"),i?void this.updateGetPathTemplate(n):void this.updateGetPathSelector(n)):void console.error("InfiniteScroll path option required. Set as: "+n)},u.updateGetPathTemplate=function(n){this.getPath=function(){var t=this.pageIndex+1;return n.replace("{{#}}",t)}.bind(this);var i=n.replace(/(\\\?|\?)/,"\\?").replace("{{#}}","(\\d\\d?\\d?)"),r=new RegExp(i),t=location.href.match(r);t&&(this.pageIndex=parseInt(t[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))},o=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/],u.updateGetPathSelector=function(n){var f=document.querySelector(n),t,e,i,r,u;if(!f)return void console.error("Bad InfiniteScroll path option. Next link not found: "+n);for(i=f.getAttribute("href"),r=0;i&&r<o.length;r++)if(e=o[r],u=i.match(e),u){t=u.slice(1);break}return t?(this.isPathSelector=!0,this.getPath=function(){var n=this.pageIndex+1;return t[0]+n+t[2]}.bind(this),this.pageIndex=parseInt(t[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void console.error("InfiniteScroll unable to parse next link href: "+i)},u.updateGetAbsolutePath=function(){var t=this.getPath(),u=t.match(/^http/)||t.match(/^\//),n,i,r;if(u)return void(this.getAbsolutePath=this.getPath);if(n=location.pathname,i=t.match(/^\?/),i)return void(this.getAbsolutePath=function(){return n+this.getPath()});r=n.substring(0,n.lastIndexOf("/"));this.getAbsolutePath=function(){return r+"/"+this.getPath()}},r.create.hideNav=function(){var n=i.getQueryElement(this.options.hideNav);n&&(n.style.display="none",this.nav=n)},r.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},u.destroy=function(){this.allOff();for(var n in r.destroy)r.destroy[n].call(this);delete this.element.infiniteScrollGUID;delete e[this.guid];f&&this.$element&&f.removeData(this.element,"infiniteScroll")},r.throttle=function(n,t){t=t||200;var i,r;return function(){var u=+new Date,e=arguments,f=function(){i=u;n.apply(this,e)}.bind(this);i&&u<i+t?(clearTimeout(r),r=setTimeout(f,t)):f()}},r.data=function(n){n=i.getQueryElement(n);var t=n&&n.infiniteScrollGUID;return t&&e[t]},r.setJQuery=function(n){f=n},i.htmlInit(r,"infinite-scroll"),u._init=function(){},f&&f.bridget&&f.bridget("infiniteScroll",r),r}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core")):t(n,n.InfiniteScroll)}(window,function(n,t){function r(n){for(var i=document.createDocumentFragment(),t=0;n&&t<n.length;t++)i.appendChild(n[t]);return i}function u(n){for(var t,r,u=n.querySelectorAll("script"),i=0;i<u.length;i++)t=u[i],r=document.createElement("script"),f(t,r),r.innerHTML=t.innerHTML,t.parentNode.replaceChild(r,t)}function f(n,t){for(var u,r=n.attributes,i=0;i<r.length;i++)u=r[i],t.setAttribute(u.name,u.value)}function e(n,t,i,r,u){var f=new XMLHttpRequest;f.open("GET",n,!0);f.responseType=t||"";f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.onload=function(){if(200==f.status)i(f.response);else if(204==f.status)u(f.response);else{var n=new Error(f.statusText);r(n)}};f.onerror=function(){var t=new Error("Network error requesting "+n);r(t)};f.send()}var i=t.prototype;return t.defaults.loadOnScroll=!0,t.defaults.checkLastPage=!0,t.defaults.responseType="document",t.create.pageLoad=function(){this.canLoad=!0;this.on("scrollThreshold",this.onScrollThresholdLoad);this.on("load",this.checkLastPage);this.options.outlayer&&this.on("append",this.onAppendOutlayer)},i.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},i.loadNextPage=function(){var n;if(!this.isLoading&&this.canLoad){n=this.getAbsolutePath();this.isLoading=!0;var t=function(t){this.onPageLoad(t,n)}.bind(this),i=function(t){this.onPageError(t,n)}.bind(this),r=function(t){this.lastPageReached(t,n)}.bind(this);e(n,this.options.responseType,t,i,r);this.dispatchEvent("request",null,[n])}},i.onPageLoad=function(n,t){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[n,t]),this.appendNextPage(n,t),n},i.appendNextPage=function(n,t){var u=this.options.append,o="document"==this.options.responseType;if(o&&u){var i=n.querySelectorAll(u),f=r(i),e=function(){this.appendItems(i,f);this.isLoading=!1;this.dispatchEvent("append",null,[n,t,i])}.bind(this);this.options.outlayer?this.appendOutlayerItems(f,e):e()}},i.appendItems=function(n,t){n&&n.length&&(t=t||r(n),u(t),this.element.appendChild(t))},i.appendOutlayerItems=function(i,r){var u=t.imagesLoaded||n.imagesLoaded;return u?void u(i,r):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},i.onAppendOutlayer=function(n,t,i){this.options.outlayer.appended(i)},i.checkLastPage=function(n,t){var r=this.options.checkLastPage,u,f,i,e;if(r){if(u=this.options.path,"function"==typeof u&&(f=this.getPath(),!f))return void this.lastPageReached(n,t);("string"==typeof r?i=r:this.isPathSelector&&(i=u),i&&n.querySelector)&&(e=n.querySelector(i),e||this.lastPageReached(n,t))}},i.lastPageReached=function(n,t){this.canLoad=!1;this.dispatchEvent("last",null,[n,t])},i.onPageError=function(n,t){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[n,t]),n},t.create.prefill=function(){if(this.options.prefill){var n=this.options.append;if(!n)return void console.error("append option required for prefill. Set as :"+n);this.updateMeasurements();this.updateScroller();this.isPrefilling=!0;this.on("append",this.prefill);this.once("error",this.stopPrefill);this.once("last",this.stopPrefill);this.prefill()}},i.prefill=function(){var n=this.getPrefillDistance();this.isPrefilling=n>=0;this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},i.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},i.stopPrefill=function(){this.log("stopPrefill");this.off("append",this.prefill)},t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){var r=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this);this.resizeHandler=this.onResize.bind(this);var n=this.options.scrollThreshold,t=n||0===n;t&&this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},r.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},r.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},r.bindScrollWatchEvents=function(t){var i=t?"addEventListener":"removeEventListener";this.scroller[i]("scroll",this.pageScrollHandler);n[i]("resize",this.resizeHandler)},r.onPageScroll=t.throttle(function(){var n=this.getBottomDistance();n<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),r.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},r.getWindowBottomDistance=function(){var t=this.top+this.element.clientHeight,i=n.pageYOffset+this.windowHeight;return t-i},r.getElementBottomDistance=function(){var n=this.scroller.scrollHeight,t=this.scroller.scrollTop+this.scroller.clientHeight;return n-t},r.onResize=function(){this.updateMeasurements()},i.debounceMethod(t,"onResize",150),t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){var r=t.prototype,u;return t.defaults.history="replace",u=document.createElement("a"),t.create.history=function(){if(this.options.history){u.href=this.getAbsolutePath();var n=u.origin||u.protocol+"//"+u.host,t=n==location.origin;return t?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+u.origin+" on "+location.origin+" . History behavior disabled.")}},r.createHistoryAppend=function(){this.updateMeasurements();this.updateScroller();this.scrollPages=[{top:0,path:location.href,title:document.title}];this.scrollPageIndex=0;this.scrollHistoryHandler=this.onScrollHistory.bind(this);this.unloadHandler=this.onUnload.bind(this);this.scroller.addEventListener("scroll",this.scrollHistoryHandler);this.on("append",this.onAppendHistory);this.bindHistoryAppendEvents(!0)},r.bindHistoryAppendEvents=function(t){var i=t?"addEventListener":"removeEventListener";this.scroller[i]("scroll",this.scrollHistoryHandler);n[i]("unload",this.unloadHandler)},r.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=r.destroyHistory=function(){var n=this.options.history&&this.options.append;n&&this.bindHistoryAppendEvents(!1)},r.onAppendHistory=function(n,t,i){if(i&&i.length){var r=i[0],f=this.getElementScrollY(r);u.href=t;this.scrollPages.push({top:f,path:u.href,title:n.title})}},r.getElementScrollY=function(n){return this.options.elementScroll?this.getElementElementScrollY(n):this.getElementWindowScrollY(n)},r.getElementWindowScrollY=function(t){var i=t.getBoundingClientRect();return i.top+n.pageYOffset},r.getElementElementScrollY=function(n){return n.offsetTop-this.top},r.onScrollHistory=function(){for(var t,i,r,u=this.getScrollViewY(),n=0;n<this.scrollPages.length;n++){if(r=this.scrollPages[n],r.top>=u)break;t=n;i=r}t!=this.scrollPageIndex&&(this.scrollPageIndex=t,this.setHistory(i.title,i.path))},i.debounceMethod(t,"onScrollHistory",150),r.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:n.pageYOffset+this.windowHeight/2},r.setHistory=function(n,t){var i=this.options.history,r=i&&history[i+"State"];r&&(history[i+"State"](null,n,t),this.options.historyTitle&&(document.title=n),this.dispatchEvent("history",null,[n,t]))},r.onUnload=function(){var t=this.scrollPageIndex,i,r;0!==t&&(i=this.scrollPages[t],r=n.pageYOffset-i.top+this.top,this.destroyHistory(),scrollTo(0,r))},r.onPageLoadHistory=function(n,t){this.setHistory(n.title,t)},t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){function r(n,t){this.element=n;this.infScroll=t;this.clickHandler=this.onClick.bind(this);this.element.addEventListener("click",this.clickHandler);t.on("request",this.disable.bind(this));t.on("load",this.enable.bind(this));t.on("error",this.hide.bind(this));t.on("last",this.hide.bind(this))}return t.create.button=function(){var n=i.getQueryElement(this.options.button);n},t.destroy.button=function(){this.button&&this.button.destroy()},r.prototype.onClick=function(n){n.preventDefault();this.infScroll.loadNextPage()},r.prototype.enable=function(){this.element.removeAttribute("disabled")},r.prototype.disable=function(){this.element.disabled="disabled"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},t.Button=r,t}),function(n,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(i,r){return t(n,i,r)}):"object"==typeof module&&module.exports?module.exports=t(n,require("./core"),require("fizzy-ui-utils")):t(n,n.InfiniteScroll,n.fizzyUIUtils)}(window,function(n,t,i){function u(n){e(n,"none")}function f(n){e(n,"block")}function e(n,t){n&&(n.style.display=t)}var r=t.prototype;return t.create.status=function(){var n=i.getQueryElement(this.options.status);n&&(this.statusElement=n,this.statusEventElements={request:n.querySelector(".infinite-scroll-request"),error:n.querySelector(".infinite-scroll-error"),last:n.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},r.bindHideStatus=function(n){var t=this.options.append?"append":"load";this[n](t,this.hideAllStatus)},r.showRequestStatus=function(){this.showStatus("request")},r.showErrorStatus=function(){this.showStatus("error")},r.showLastStatus=function(){this.showStatus("last");this.bindHideStatus("off")},r.showStatus=function(n){f(this.statusElement);this.hideStatusEventElements();var t=this.statusEventElements[n];f(t)},r.hideAllStatus=function(){u(this.statusElement);this.hideStatusEventElements()},r.hideStatusEventElements=function(){var n,t;for(n in this.statusEventElements)t=this.statusEventElements[n],u(t)},t}),function(n,t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(n){return n}),function(n,t){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return t(n,i)}):"object"==typeof module&&module.exports?module.exports=t(n,require("ev-emitter")):n.imagesLoaded=t(n,n.EvEmitter)}("undefined"!=typeof window?window:this,function(n,t){function o(n,t){for(var i in t)n[i]=t[i];return n}function h(n){if(Array.isArray(n))return n;var t="object"==typeof n&&"number"==typeof n.length;return t?c.call(n):[n]}function i(n,t,r){if(!(this instanceof i))return new i(n,t,r);var u=n;return"string"==typeof n&&(u=document.querySelectorAll(n)),u?(this.elements=h(u),this.options=o({},this.options),"function"==typeof t?r=t:o(this.options,t),r&&this.on("always",r),this.getImages(),f&&(this.jqDeferred=new f.Deferred),void setTimeout(this.check.bind(this))):void e.error("Bad element for imagesLoaded "+(u||n))}function r(n){this.img=n}function u(n,t){this.url=n;this.element=t;this.img=new Image}var f=n.jQuery,e=n.console,c=Array.prototype.slice,s;return i.prototype=Object.create(t.prototype),i.prototype.options={},i.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)},i.prototype.addElementImages=function(n){var i,r,t,f,u,e;if("IMG"==n.nodeName&&this.addImage(n),this.options.background===!0&&this.addElementBackgroundImages(n),i=n.nodeType,i&&s[i]){for(r=n.querySelectorAll("img"),t=0;t<r.length;t++)f=r[t],this.addImage(f);if("string"==typeof this.options.background)for(u=n.querySelectorAll(this.options.background),t=0;t<u.length;t++)e=u[t],this.addElementBackgroundImages(e)}},s={1:!0,9:!0,11:!0},i.prototype.addElementBackgroundImages=function(n){var i=getComputedStyle(n),r,t,u;if(i)for(r=/url\((['"])?(.*?)\1\)/gi,t=r.exec(i.backgroundImage);null!==t;)u=t&&t[2],u&&this.addBackground(u,n),t=r.exec(i.backgroundImage)},i.prototype.addImage=function(n){var t=new r(n);this.images.push(t)},i.prototype.addBackground=function(n,t){var i=new u(n,t);this.images.push(i)},i.prototype.check=function(){function n(n,i,r){setTimeout(function(){t.progress(n,i,r)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",n);t.check()}):void this.complete()},i.prototype.progress=function(n,t,i){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!n.isLoaded;this.emitEvent("progress",[this,n,t]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,n);this.progressedCount==this.images.length&&this.complete();this.options.debug&&e&&e.log("progress: "+i,n,t)},i.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done",n;(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred)&&(n=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[n](this))},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var n=this.getIsImageComplete();return n?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(n,t){this.isLoaded=n;this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},r.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)},u.prototype=Object.create(r.prototype),u.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;var n=this.getIsImageComplete();n&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)},u.prototype.confirm=function(n,t){this.isLoaded=n;this.emitEvent("progress",[this,this.element,t])},i.makeJQueryPlugin=function(t){t=t||n.jQuery;t&&(f=t,f.fn.imagesLoaded=function(n,t){var r=new i(this,n,t);return r.jqDeferred.promise(f(this))})},i.makeJQueryPlugin(),i}),function(n){typeof module=="object"&&typeof module.exports=="object"?module.exports=function(t){n(t,window,document)}:n(jQuery,window,document)}(function(n,t,i){function f(n,t){t=t||{};n._options.elementContainer=t.elementContainer||"div";var i=t.classNames||{};n._options.classNameSeconds=i.seconds||"jst-seconds";n._options.classNameMinutes=i.minutes||"jst-minutes";n._options.classNameHours=i.hours||"jst-hours";n._options.classNameClearDiv=i.clearDiv||"jst-clearDiv";n._options.classNameTimeout=i.timeout||"jst-timeout"}Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};var u,r=function(n){return this._options={},this.targetElement=n,this};r.start=function(n,t){return u=new r(t),f(u,n),u.start(n)};r.prototype.start=function(t){var r=this,f=function(n){var e=i.createElement(r._options.elementContainer),t,u,f;return e.className=r._options.classNameSeconds,t=i.createElement(r._options.elementContainer),t.className=r._options.classNameMinutes,u=i.createElement(r._options.elementContainer),u.className=r._options.classNameHours,f=i.createElement(r._options.elementContainer),f.className=r._options.classNameClearDiv,n.append(u).append(t).append(e).append(f)};this.targetElement.each(function(i,r){var o=this,e=n(r),s=e.attr("class");e.on("complete",function(){clearInterval(e.intervalId)});e.on("complete",function(){e.onComplete(e)});e.on("complete",function(){e.addClass(o._options.classNameTimeout)});e.on("complete",function(){t&&t.loop===!0&&u.resetTimer(e,t,s)});e.on("pause",function(){clearInterval(e.intervalId);e.paused=!0});e.on("resume",function(){e.paused=!1;o.startCountdown(e,{secondsLeft:e.data("timeLeft")})});return f(e),this.startCountdown(e,t)}.bind(this))};r.prototype.resetTimer=function(n,t,i){var r=0;t.loopInterval&&(r=parseInt(t.loopInterval,10)*1e3);setTimeout(function(){n.trigger("reset");n.attr("class",i+" loop");u.startCountdown(n,t)},r)};r.prototype.fetchSecondsLeft=function(n){var t=n.data("seconds-left"),i=n.data("minutes-left");if(Number.isFinite(t))return parseInt(t,10);if(Number.isFinite(i))return parseFloat(i)*60;throw"Missing time data";};r.prototype.startCountdown=function(n,t){var r,u;if(t=t||{},r=null,u=function(){return clearInterval(r),this.clearTimer(n)}.bind(this),n.onComplete=t.onComplete||u,n.allowPause=t.allowPause||!1,n.allowPause)n.on("click",function(){n.paused?n.trigger("resume"):n.trigger("pause")});var e=t.secondsLeft||this.fetchSecondsLeft(n),o=t.refreshRate||1e3,f=e+this.currentTime(),i=f-this.currentTime();this.setFinalValue(this.formatTimeLeft(i),n);r=setInterval(function(){i=f-this.currentTime();i<0&&(i=0);n.data("timeLeft",i);this.setFinalValue(this.formatTimeLeft(i),n)}.bind(this),o);n.intervalId=r};r.prototype.clearTimer=function(n){n.find(".jst-seconds").text("00");n.find(".jst-minutes").text("00:");n.find(".jst-hours").text("00:")};r.prototype.currentTime=function(){return Math.round((new Date).getTime()/1e3)};r.prototype.formatTimeLeft=function(n){var i=function(n,t){return t=t||2,n=n+"",n.length>=t?n:Array(t-n.length+1).join(0)+n},r=Math.floor(n/3600),t,u;return n-=r*3600,t=Math.floor(n/60),n-=t*60,u=parseInt(n%60,10),+r==0&&+t==0&&+u==0?[]:[i(r),i(t),i(u)]};r.prototype.setFinalValue=function(n,t){if(n.length===0)return this.clearTimer(t),t.trigger("complete"),!1;t.find("."+this._options.classNameSeconds).text(n.pop());t.find("."+this._options.classNameMinutes).text(n.pop()+":");t.find("."+this._options.classNameHours).text(n.pop()+":")};n.fn.startTimer=function(n){return this.TimerObject=r,r.start(n,this),this}});Players=[];currentCommentPageId=0;$(window).ready(function(){$(document).on("click",".video-items-layer .video-item > .view-Live",function(){$(".video-items-layer .video-item .video-Live-layer").css("display","none");$(".video-items-layer .video-item .video-Live-layer").empty();$(this).parents().closest(".video-item").find(".video-Live-layer").fadeIn("fast");var n=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("id"),t=$(this).parents().closest(".video-item").find(".video-Live-layer").attr("episodeId");LoadVideoForShowLive(t,n)});scrollForEpisode();initVideoPlayer();setCourseId();loadComments();window.onscroll=function(){document.body.scrollTop>10||document.documentElement.scrollTop>10?$(".course-scroll-button").css("display","block"):$(".course-scroll-button").css("display","none")}});const viewOnlineElements=document.getElementsByClassName("view-Live");for(i=0;i<viewOnlineElements.length;i++)viewOnlineElements[i].addEventListener("touchstart",touchHandler);i=0;$(window).bind("beforeunload",function(){SendCurrentTimeToServer()});$(".timer").startTimer({elementContainer:"i",onComplete:function(){location.reload()}});expandable();